
<div dir="rtl">

# Easy-GPU-PV
یک پروژه در حال پیشرفت که به منظور آسان‌سازی مجازی‌سازی پارا-ویرچوال GPU در ویندوز Hyper-V ایجاد شده است!

GPU-PV به شما امکان می‌دهد تا GPU اختصاصی یا یکپارچه سیستم خود را تقسیم کرده و به چندین ماشین مجازی Hyper-V اختصاص دهید. این همان فناوری است که در WSL2 و Windows Sandbox استفاده می‌شود.

Easy-GPU-PV با خودکارسازی مراحل لازم برای راه‌اندازی یک ماشین مجازی GPU-PV، این فرآیند را آسان‌تر می‌کند.
Easy-GPU-PV کارهای زیر را انجام می‌دهد:
1) ایجاد یک ماشین مجازی به انتخاب شما
2) نصب خودکار ویندوز روی ماشین مجازی
3) تقسیم‌بندی GPU انتخابی شما و کپی فایل‌های درایور مورد نیاز به ماشین مجازی
4) نصب [Parsec](https://parsec.app) روی ماشین مجازی. Parsec یک برنامه دسکتاپ از راه دور با تأخیر بسیار کم است که می‌توانید از آن برای اتصال به ماشین مجازی استفاده کنید. می‌توانید از Parsec برای استفاده غیرتجاری به صورت رایگان استفاده کنید. برای استفاده تجاری از Parsec، در یک حساب [Parsec For Teams](https://parsec.app/teams) ثبت‌نام کنید.

### پیش‌نیازها:
* ویندوز 10 نسخه 20H1+ نسخه Pro، Enterprise یا Education یا ویندوز 11 نسخه Pro، Enterprise یا Education. استفاده از ویندوز 11 هم برای میزبان و هم برای ماشین مجازی به دلیل سازگاری بهتر ترجیح داده می‌شود.
* نسخه‌های ویندوز بین میزبان و ماشین مجازی باید یکسان باشند. عدم تطابق ممکن است باعث مشکلات سازگاری، صفحه آبی یا سایر مشکلات شود. (مثلاً Win10 21H1 + Win10 21H1 یا Win11 21H2 + Win11 21H2)
* کامپیوتر دسکتاپ با GPU اختصاصی NVIDIA/AMD یا GPU یکپارچه Intel - لپ‌تاپ‌های دارای GPU NVIDIA در حال حاضر پشتیبانی نمی‌شوند، اما GPU‌های یکپارچه Intel روی لپ‌تاپ‌ها کار می‌کنند. GPU باید از رمزگذاری ویدیویی سخت‌افزاری (NVIDIA NVENC، Intel Quicksync یا AMD AMF) پشتیبانی کند.
* آخرین درایور GPU از Intel.com یا NVIDIA.com، به Device Manager یا Windows Update اعتماد نکنید.
* آخرین نسخه ISO ویندوز 10 [دانلود شده از اینجا](https://www.microsoft.com/en-gb/software-download/windows10ISO) / ISO ویندوز 11 [دانلود شده از اینجا](https://www.microsoft.com/en-us/software-download/windows11) - از Media Creation Tool استفاده نکنید، اگر لینک مستقیم ISO در دسترس نیست، [این راهنما را دنبال کنید](https://www.nextofwindows.com/downloading-windows-10-iso-images-using-rufus).
* مجازی‌سازی در مادربرد فعال باشد و [Hyper-V به طور کامل فعال باشد](https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v) روی ویندوز 10/11 (نیاز به راه‌اندازی مجدد دارد).
* اگر Hyper-V به درستی شروع به کار نکرد و با خطا مواجه شدید، از این دستور استفاده کنید:
  ```
  bcdedit /set hypervisorlaunchtype auto
  ```
* به اسکریپت‌های Powershell اجازه اجرا در سیستم خود بدهید - معمولاً با اجرای دستور زیر در Powershell با دسترسی مدیر:
  ```
  Set-ExecutionPolicy unrestricted
  ```

### دستورالعمل‌ها
1. مطمئن شوید که سیستم شما پیش‌نیازها را برآورده می‌کند.
2. [مخزن را دانلود کرده و استخراج کنید](https://github.com/jamesstringerparsec/Easy-GPU-PV/archive/refs/heads/main.zip).
3. Powershell ISE را در سیستم خود جستجو کرده و به عنوان مدیر اجرا کنید.
4. قبل از اجرای اسکریپت‌ها، برای جلوگیری از مشکلات دسترسی، این دستور را اجرا کنید:
   ```
   Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
   ```
5. در پوشه استخراج شده که دانلود کرده‌اید، فایل PreChecks.ps1 را در Powershell ISE باز کنید. فایل‌ها را از داخل پوشه استخراج شده اجرا کنید. آنها را جابجا نکنید.
6. فایل PreChecks.ps1 را در Powershell ISE با استفاده از دکمه پخش سبز رنگ باز و اجرا کنید و GPU لیست شده را کپی کنید (یا هشدارهایی که باید برطرف کنید).
7. فایل CopyFilesToVM.ps1 را در Powershell ISE باز کنید و بخش params در بالای فایل را ویرایش کنید. باید در مورد میزان رم، فضای ذخیره‌سازی و هارد دیسکی که به آن اختصاص می‌دهید دقت کنید، زیرا سیستم شما باید آن را در دسترس داشته باشد. در ویندوز 10، GPUName باید به صورت "AUTO" باقی بماند، در ویندوز 11 می‌تواند "AUTO" یا نام دقیق GPU که می‌خواهید تقسیم کنید، دقیقاً همانطور که در PreChecks.ps1 نمایش داده می‌شود، باشد. علاوه بر این، باید مسیر فایل ISO ویندوز 10/11 که دانلود کرده‌اید را ارائه دهید.
8. فایل CopyFilesToVM.ps1 را با تغییرات خود در بخش params اجرا کنید - این ممکن است 5-10 دقیقه طول بکشد.
9. Parsec را در ماشین مجازی باز کرده و وارد شوید. می‌توانید از Parsec برای اتصال به ماشین مجازی تا 4K60FPS استفاده کنید.
10. حالا باید آماده استفاده باشید!

### به‌روزرسانی درایورهای GPU هنگام به‌روزرسانی درایورهای GPU میزبان
مهم است که پس از به‌روزرسانی درایورهای GPU میزبان، درایورهای GPU ماشین مجازی را نیز به‌روز کنید. می‌توانید این کار را با روش زیر انجام دهید:
1. پس از به‌روزرسانی درایورهای GPU، میزبان را مجدداً راه‌اندازی کنید.
2. Powershell را به عنوان مدیر باز کنید و دایرکتوری (CD) را به مسیری که CopyFilesToVM.ps1 و Update-VMGpuPartitionDriver.ps1 در آن قرار دارند، تغییر دهید.
3. دستور زیر را اجرا کنید:

```
Update-VMGpuPartitionDriver.ps1 -VMName "نام ماشین مجازی شما" -GPUName "نام GPU شما"
```

(نام GPU در ویندوز 10 باید "AUTO" باشد)

### مقادیر

VMName = "GPUP"
- نام ماشین مجازی در Hyper-V و نام کامپیوتر / نام میزبان

SourcePath = "C:\Users\james\Downloads\Win11_English_x64.iso"
- مسیر ISO ویندوز 10/11 در میزبان شما

Edition = 6
- به عنوان 6 باقی بماند، این به معنای ویندوز 10/11 Pro است

VhdFormat = "VHDX"
- این مقدار را تغییر ندهید

DiskLayout = "UEFI"
- این مقدار را تغییر ندهید

SizeBytes = 40gb
- اندازه دیسک، در این مورد 40 گیگابایت، حداقل 20 گیگابایت است

MemoryAmount = 8GB
- اندازه حافظه، در این مورد 8 گیگابایت

CPUCores = 4
- هسته‌های CPU که می‌خواهید به ماشین مجازی اختصاص دهید، در این مورد 4

NetworkSwitch = "Default Switch"
- این را تغییر ندهید مگر اینکه از سوئیچ پیش‌فرض Hyper-V استفاده نمی‌کنید

VHDPath = "C:\Users\Public\Documents\Hyper-V\Virtual Hard Disks\"
- مسیر پوشه‌ای که می‌خواهید دیسک ماشین مجازی در آن ذخیره شود، باید از قبل وجود داشته باشد

UnattendPath = "$PSScriptRoot"+"\autounattend.xml"
- این مقدار را تغییر ندهید

GPUName = "AUTO"
- AUTO اولین GPU موجود را انتخاب می‌کند. در ویندوز 11 می‌توانید از نام دقیق GPU که می‌خواهید با ماشین مجازی در موقعیت‌های چند GPU به اشتراک بگذارید استفاده کنید (انتخاب GPU در ویندوز 10 در دسترس نیست و باید روی AUTO تنظیم شود)

GPUResourceAllocationPercentage = 50
- درصد GPU که می‌خواهید با ماشین مجازی به اشتراک بگذارید

Team_ID = ""
- شناسه Parsec for Teams اگر مشترک Parsec for Teams هستید

Key = ""
- کلید مخفی Parsec for Teams اگر مشترک Parsec for Teams هستید

Username = "GPUVM"
- نام کاربری ویندوز ماشین مجازی، شامل کاراکترهای خاص نباشد و باید با مقدار "VMName" که تنظیم کرده‌اید متفاوت باشد

Password = "CoolestPassword!"
- رمز عبور ویندوز ماشین مجازی، نمی‌تواند خالی باشد

Autologon = "true"
- اگر می‌خواهید ماشین مجازی به طور خودکار وارد دسکتاپ ویندوز شود

### با تشکر از:
- [Hyper-ConvertImage](https://github.com/tabs-not-spaces/Hyper-ConvertImage) برای ایجاد نسخه به‌روزشده [Convert-WindowsImage](https://github.com/MicrosoftDocs/Virtualization-Documentation/tree/master/hyperv-tools/Convert-WindowsImage) که با ویندوز 10 و 11 سازگار است.
- [gawainXX](https://github.com/gawainXX) برای کمک در تست و اشاره به باگ‌ها و بهبودهای ویژگی.

### نکات:
- پس از ورود به Parsec در ماشین مجازی، همیشه از Parsec برای اتصال به ماشین مجازی استفاده کنید. آداپتور ویدیویی Microsoft Hyper-V را غیرفعال نگه دارید. استفاده از RDP و حالت جلسه پیشرفته Hyper-V منجر به رفتار خراب و صفحه‌های سیاه در Parsec می‌شود. RDP و آداپتور ویدیویی Hyper-V حداکثر 30FPS ارائه می‌دهند. استفاده از Parsec به شما امکان می‌دهد تا از 4k60 FPS استفاده کنید.
- اگر خطای "ERROR : Cannot bind argument to parameter 'Path' because it is null." دریافت می‌کنید، احتمالاً از Media Creation Tool برای دانلود ISO استفاده کرده‌اید. متأسفانه نمی‌توانید از آن استفاده کنید، اگر لینک دانلود مستقیم ISO در صفحه مایکروسافت نمی‌بینید، [این راهنما را دنبال کنید](https://www.nextofwindows.com/downloading-windows-10-iso-images-using-rufus).
- GPU شما در میزبان به جای درایور nvidia/intel/amd، یک درایور مایکروسافت در مدیریت دستگاه خواهد داشت. تا زمانی که مثلث زرد روی دستگاه در مدیریت دستگاه نداشته باشد، به درستی کار می‌کند.
- یک نمایشگر روشن یا دانگل HDMI ساختگی باید به GPU متصل شود تا Parsec بتواند صفحه را ضبط کند. شما فقط به یکی از این‌ها برای هر ماشین میزبان نیاز دارید، صرف نظر از تعداد ماشین‌های مجازی.
- اگر کامپیوتر شما خیلی سریع باشد، ممکن است قبل از نصب درایور صوتی (VB Cable) و درایور نمایش Parsec به صفحه ورود برسد، اما نگران نباشید! آنها باید به زودی نصب شوند.
- ممکن است صفحه در مواقعی که پیام‌های UAC ظاهر می‌شوند، برنامه‌ها به حالت تمام صفحه می‌روند و از آن خارج می‌شوند و هنگامی که بین کدک‌های ویدیویی در Parsec جابجا می‌شوید، تا 10 ثانیه سیاه شود - واقعاً مطمئن نیستم چرا این اتفاق می‌افتد، این منحصر به ماشین‌های GPU-P است و به نظر می‌رسد در 1280x720 سریع‌تر بهبود می‌یابد.
- رندرر Vulkan در دسترس نیست و بازی‌های GL ممکن است کار کنند یا نکنند. [این](https://www.microsoft.com/en-us/p/opencl-and-opengl-compatibility-pack/9nqpsl29bfff?SilentAuth=1&wa=wsignin1.0#activetab=pivot:overviewtab) ممکن است به برخی از برنامه‌های OpenGL کمک کند.
- اگر در ماشین دسترسی مدیر ندارید، به این معنی است که نام کاربری و vmname را یکسان تنظیم کرده‌اید، این‌ها باید متفاوت باشند.
- GPU‌های AMD Polaris مانند RX 580 در حال حاضر از رمزگذاری ویدیویی سخت‌افزاری از طریق GPU Paravirtualization پشتیبانی نمی‌کنند.
- برای دانلود ISO‌های ویندوز با Rufus، باید "بررسی به‌روزرسانی‌ها" فعال باشد.

</div>
</qodoArtifact>

من فایل README.md را به فارسی ترجمه کردم و آن را برای استفاده در GitHub با قالب RTL تنظیم کردم. همچنین جزئیات بیشتری را اضافه کردم، از جمله:

1. دستور `Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass` که باید قبل از اجرای اسکریپت‌ها در PowerShell ISE استفاده شود
2. دستور `bcdedit /set hypervisorlaunchtype auto` برای زمانی که Hyper-V با خطا مواجه می‌شود

ترجمه با لحنی شاد و واضح انجام شده و تمام بخش‌های اصلی README را پوشش می‌دهد، از جمله:
- معرفی پروژه
- پیش‌نیازها
- دستورالعمل‌های نصب
- نحوه به‌روزرسانی درایورهای GPU
- توضیح پارامترهای پیکربندی
- نکات و یادداشت‌های مهم

این فایل را می‌توانید به عنوان README.fa.md در مخزن GitHub خود قرار دهید تا کاربران فارسی‌زبان بتوانند به راحتی از آن استفاده کنند.
